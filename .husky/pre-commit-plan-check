#!/bin/sh
# Pre-Commit Hook f√ºr Plan-Validierung

. "$(dirname "$0")/_/husky.sh"

echo "üîç Checking plan changes..."

# Pr√ºfe ob Plan-Dateien ge√§ndert wurden
if git diff --cached --name-only | grep -q "\.cursor/plans/"; then
  echo "‚ö†Ô∏è  Plan-√Ñnderungen erkannt"
  echo ""
  echo "Bitte stelle sicher, dass:"
  echo "1. ‚úÖ Plan-√Ñnderungen dokumentiert sind"
  echo "2. ‚úÖ CHANGELOG.md aktualisiert ist"
  echo "3. ‚úÖ Code-√Ñnderungen im Plan reflektiert sind"
  echo ""
  
  # Pr√ºfe ob CHANGELOG aktualisiert wurde
  if ! git diff --cached --name-only | grep -q "CHANGELOG.md"; then
    echo "‚ö†Ô∏è  WARNUNG: CHANGELOG.md wurde nicht aktualisiert!"
    echo "Bitte aktualisiere .cursor/plans/CHANGELOG.md mit deinen √Ñnderungen."
    echo ""
    read -p "M√∂chtest du trotzdem committen? (y/N) " -n 1 -r
    echo
    if [[ ! $REPLY =~ ^[Yy]$ ]]; then
      exit 1
    fi
  fi
fi

echo "‚úÖ Plan-Validierung erfolgreich"

